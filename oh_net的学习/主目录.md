这里开始记录杉木笙在oh_net的学习方法
# 目前的目录结构(24-11-29)
![[Pasted image 20241129114707.png]]
`Port`文件夹下存放的是继承(大部分)的`BaseRequest`类,而`BaseRequest`也是一个抽象于`OhBaseRequest`的抽象类,至此简单的介绍,`BaseRequest`里存放的是`OhBaseRequest`的一些方法
比如`是否使用https` 和基础的接口地址`baseUrl` 以及`请求完成之后操作`和`请求之前操作`
```
abstract class BaseRequest extends OhBaseRequest {  
  BaseRequest() {  
    // 生成实例时作出校验  
  }  
  
  @override  
  bool useHttps() {  
    // 是否使用https  
    return false;  
  }  
  
  @override  
  String baseUrl() {  
    return '106.12.75.80:7000';  
  }  
  
  @override  
  Future<void> onRequest(OhBaseRequest request) async {  
    // 请求之前操作  
  }  
  
  @override  
  Future<void> onResponse(  
      OhBaseRequest request, OhNetResponse? response) async {  
    // 请求完成之后操作  
  }  
}
```
## 举个例子AIImagePort
`AIImagePort`也是继承`BaseRequest` ,重写了`BaseRequest`继承的`OhBaseRequest`的`path`
也就是说,使用接口的地址顺序是
```
  String url() {
    Uri uri;
    
    //拼接path参数
    var pathStr = "${basePath()}${path()}";

    //http和https切换
    if (useHttps()) {
      uri = Uri.https(baseUrl(), pathStr);
    } else {
      uri = Uri.http(baseUrl(), pathStr);
    }
    return uri.toString();
  }
```
那这个例子的地址就是
`http://106.12.75.80:7000/api/images/generate`
```
/// AI生图  
class AIImagePort extends BaseRequest {  
  @override  
  HttpMethod httpMethod() {  
    return HttpMethod.post;  
  }  
  
  @override  
  String path() {  
    return "/api/images/generate";  
  }
}
```
# 其他